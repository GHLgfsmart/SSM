<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="WarningMapper">

	<resultMap type="Warehouse" id="WarehouseResultMap">
		<id column="ID" property="ID"/>
		<result column="NAME" property="NAME"/>
		<result column="SIZE" property="SIZE"/>
		<result column="UPPER_LIMIT" property="UPPER_LIMIT"/>
		<result column="LOWER_LIMIT" property="LOWER_LIMIT"/>
		<result column="PRACTICAl" property="PRACTICAl"/>
		<result column="ADDRESS" property="ADDRESS"/>  
		<result column="ENTRY_TIME" property="ENTRY_TIME"/>
		<result column="UPDATE_TIME" property="UPDATE_TIME"/>
		<result column="NOTE" property="NOTE"/>
		<result column="STATE" property="STATE"/>
	</resultMap>
	<sql id="tableName">
		warehouse w
	</sql>
	
	
	<select id="datalistPage" parameterType="page" resultType="pd">
		select w.ID,w.SIZE,w.NAME,w.UPPER_LIMIT,w.LOWER_LIMIT,w.PRACTICAl,w.ADDRESS from <include refid="tableName"></include> where w.PRACTICAL > w.UPPER_LIMIT or w.PRACTICAL &lt; w.LOWER_LIMIT 
		
		<if test="pd.keywords!= null and pd.keywords != ''"><!-- 关键词检索 -->
			and
				(
					 w.ID like  #{pd.keywords}
					 or 
					 w.NAME like #{pd.keywords}
					 or
					 w.UPPER_LIMIT like #{pd.keywords}
					 or
					 w.LOWER_LIMIT like #{pd.keywords}
					 or
					 w.PRACTICAl like #{pd.keywords}
					 or
					 w.ADDRESS like #{pd.keywords}
				)
		</if>
		order by w.ADDRESS desc
	</select>
	
	<select id="ExportData" parameterType="pd" resultType="pd">
		select w.ID,w.SIZE,w.NAME,w.UPPER_LIMIT,w.LOWER_LIMIT,w.PRACTICAl,w.ADDRESS from <include refid="tableName"></include> where w.PRACTICAL > w.UPPER_LIMIT or w.PRACTICAL &lt; w.LOWER_LIMIT 
		
		<if test="pd.keywords!= null and pd.keywords != ''"><!-- 关键词检索 -->
			and
				(
					 w.ID like  #{pd.keywords}
					 or 
					 w.NAME like #{pd.keywords}
					 or
					 w.UPPER_LIMIT like #{pd.keywords}
					 or
					 w.LOWER_LIMIT like #{pd.keywords}
					 or
					 w.PRACTICAl like #{pd.keywords}
					 or
					 w.ADDRESS like #{pd.keywords}
				)
		</if>
		order by w.ADDRESS desc
	</select>
</mapper>