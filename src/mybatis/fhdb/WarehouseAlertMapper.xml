<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="WarningMapper">

	<resultMap type="Warehouse" id="WarehouseResultMap">
		<id column="ID" property="ID" />
		<result column="WARNAME" property="WARNAME" />
		<result column="SIZE" property="SIZE" />
		<result column="UPPER_LIMIT" property="UPPER_LIMIT" />
		<result column="LOWER_LIMIT" property="LOWER_LIMIT" />
		<result column="PRACTICAl" property="PRACTICAl" />
		<result column="ADDRESS" property="ADDRESS" />
		<result column="ENTRY_TIME" property="ENTRY_TIME" />
		<result column="UPDATE_TIME" property="UPDATE_TIME" />
		<result column="NOTE" property="NOTE" />
		<result column="STATE" property="STATE" />
	</resultMap>
	
	<sql id="tableName">
		warehouse
	</sql>


	<!-- 查询出所有警报及数据导出 -->
	<select id="datalistPage" parameterType="page" resultType="pd">
		select
		ID,SIZE,WARNAME,UPPER_LIMIT,LOWER_LIMIT,PRACTICAl,ADDRESS
		from
		<include refid="tableName"></include>
		where (PRACTICAL > UPPER_LIMIT or PRACTICAL &lt; LOWER_LIMIT) and STATE=0
		<if test="pd.keywords!= null and pd.keywords != ''"><!-- 关键词检索 -->
			and
				(	  	ID LIKE CONCAT(CONCAT(#{pd.keywords}))
						or
						SIZE LIKE CONCAT(CONCAT(#{pd.keywords}))
						or
						WARNAME LIKE CONCAT(CONCAT(#{pd.keywords}))
						or
						UPPER_LIMIT LIKE CONCAT(CONCAT(#{pd.keywords}))
						or
					  	LOWER_LIMIT LIKE CONCAT(CONCAT(#{pd.keywords}))
					  	or
					  	PRACTICAl LIKE CONCAT(CONCAT(#{pd.keywords}))
					  	or
					  	ADDRESS LIKE CONCAT(CONCAT(#{pd.keywords}))
				)
		</if>
		order by ID
	</select>
</mapper>